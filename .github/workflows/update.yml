# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# YASNO Schedule - GitHub Actions Workflow
# ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ Ğ¿ĞµÑ€ĞµĞ²Ñ–Ñ€ÑÑ” API YASNO Ñ– Ğ¾Ğ½Ğ¾Ğ²Ğ»ÑÑ” schedule.json
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

name: Update Schedule

on:
  schedule:
    # ĞšĞ¾Ğ¶Ğ½Ñ– 30 Ñ…Ğ²Ğ¸Ğ»Ğ¸Ğ½
    - cron: '5,35 * * * *'
  
  workflow_dispatch:
  
  push:
    branches:
      - main
    paths:
      - 'update.py'
      - '.github/workflows/update.yml'

jobs:
  update:
    name: Check and update schedule
    runs-on: ubuntu-latest
    
    permissions:
      contents: write
    
    steps:
      - name: ğŸ“¥ Checkout repository
        uses: actions/checkout@v4
      
      - name: ğŸ Set up Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      
      - name: ğŸ“¦ Install dependencies
        run: pip install requests
      
      - name: ğŸ” Run update script
        run: python update.py
      
      - name: ğŸ’¾ Commit and push changes
        run: |
          git config user.name "GitHub Actions Bot"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          
          git add schedule.json
          
          if git diff --staged --quiet; then
            echo "âœ… No changes to commit"
          else
            git commit -m "ğŸ”„ Update schedule $(date -u +%Y-%m-%d\ %H:%M\ UTC)"
            git push
            echo "âœ… Changes pushed successfully"
          fi
